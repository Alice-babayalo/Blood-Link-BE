{
    "swagger": "2.0",
    "info": {
        "title": "Blood Link",
        "description": "An API for managing sign up, sign in, forgot password and reset password",
        "version": "1.0.0"
    },
    "host": "blood-link-be.onrender.com",
    "basePath": "/api",
    "schemes": [
        "https",
        "http"
    ],
    "paths": {
        "/user/signup": {
            "post": {
                "summary": "User sign up registration",
                "description": "add the new user through sign up for the first time in order for simultaneous login whenever needed",
                "tags": [
                    "User"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/signup"
                        },
                        "required": true,
                        "description": "user data"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/user/logIn": {
            "post": {
                "summary": "User login",
                "description": "The user logs in whenever needed",
                "tags": [
                    "User"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/login"
                        },
                        "required": true,
                        "description": "Enter the login credentials"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/user/verify": {
            "post": {
                "summary": "User sign up account validation",
                "description": "The user must provide the otp which is the same with the otp sent via email to varify his or her accoubt",
                "tags": [
                    "User"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/otp"
                        },
                        "required": true,
                        "description": "enter your otp provided from your email account"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/user/forgotPassword": {
            "post": {
                "summary": "User forgot password",
                "description": "The user who forgot his or her password will be allowed to change the password using the link provided on his or her email account",
                "tags": [
                    "User"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "email",
                        "schema": {
                            "$ref": "#/definitions/forgotPassword"
                        },
                        "required": true,
                        "description": "Enter your email address"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/user/resetPassword/": {
            "post": {
                "summary": "User reset password",
                "description": "User enters the new password which replace the old one for future login use",
                "tags": [
                    "User"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "email",
                        "schema": {
                            "$ref": "#/definitions/resetPassword"
                        },
                        "required": true,
                        "description": "enter the new password"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/user/logout": {
            "get": {
                "summary": "User logout",
                "description": "The user is now allowed to log out from his or her account on Blood LInk",
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "successfully logged out from your account",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No Pets found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/hospital/add": {
            "post": {
                "summary": "Add a hospital",
                "description": "The hospital is added in the database for blood link services",
                "tags": [
                    "Hoppital"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/hospital"
                        },
                        "required": true,
                        "description": "Enter the new hospital details"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/hospital/delete/{name}": {
            "post": {
                "summary": "Delete a hospital",
                "description": "The hospital is removed in the database for blood link services after being deleted!",
                "tags": [
                    "Hoppital"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/delHospital"
                        },
                        "required": true,
                        "description": "Enter the name of the hospital to be deleted."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/hospital/list": {
            "get": {
                "summary": "List of all hospitals",
                "description": "Retrieves a list of all hospitals which are invloved in the services of Blood Link project",
                "tags": [
                    "Hoppital"
                ],
                "responses": {
                    "200": {
                        "description": "successfully retrieved the list of all hospitals",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Hospital not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/hospital/update": {
            "put": {
                "summary": "Update a hospital",
                "description": "The hospital information is updated here",
                "tags": [
                    "Hoppital"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID of the hospital to update",
                        "required": true,
                        "schema": {
                          "type": "string"
                        }
                      },
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/hospital"
                        },
                        "required": true,
                        "description": "Update the hospital details"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/hospital/bloodRequest": {
            "post": {
                "summary": "The hospital request emergency blood",
                "description": "The hospital request emergency blood and specifies what blood type they are in need of",
                "tags": [
                    "Hoppital"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/request"
                        },
                        "required": true,
                        "description": "Enter the new hospital details"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/hospital/listOfBloodRequest": {
            "get": {
                "summary": "List of all hospit",
                "description": "Retrieves a list of all hospitals which are invloved in the services of Blood Link project",
                "tags": [
                    "Hoppital"
                ],
                "responses": {
                    "200": {
                        "description": "successfully retrieved the list of all hospitals",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Hospital not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/hospital/approveRequest/{id}":{
                "get": {
                    "summary": "Blood request approval",
                    "description": "The administrator approves the hospital blood request usign the request id",
                    "tags": [
                        "Hoppital"
                    ],
                    "responses": {
                        "200": {
                            "description": "successful",
                            "content": {
                                "application/json": {
                                    "schema": {
                                        "type": "array"
                                    }
                                }
                            }
                        },
                        "404": {
                            "description": "blood request not found"
                        },
                        "500": {
                            "description": "Internal server error"
                        }
                    }
                }

        },
        "/hospital/namesOfAllHospitals": {
            "get": {
                "summary": "List of all hospit",
                "description": "Retrieves a list of names of all hospitals which are invloved in the services of Blood Link project",
                "tags": [
                    "Hoppital"
                ],
                "responses": {
                    "200": {
                        "description": "successfully retrieved the list of names of all hospitals",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Hospital not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/donor/createAppointments":{
            "post": {
                "summary": "Add an appointment",
                "description": "Thedonor books an appointment",
                "tags": [
                    "Donor"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/donor"
                        },
                        "required": true,
                        "description": "Enter appointment donor details"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/donor/getAppointments": {
            "get": {
                "summary": "List of all appointments",
                "description": "Retrieves a list of all appointments invloved in the services of Blood Link project",
                "tags": [
                    "Donor"
                ],
                "responses": {
                    "200": {
                        "description": "successfully retrieved the list of all appointments",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "appointment not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        }

    },
    "tags": [
        {
            "name": "User",
            "description": "Authentication and authorization of Blood Link users"
        },
        {
            "name": "Hospital",
            "description": "Functionalities to be carried out on hospitals"
        },
        {
            "name": "Donor",
            "description": "The donator"
        }
    ],
    "definitions": {
        "signup": {
            "type": "object",
            "properties": {
                "username": {
                    "type": "string",
                    "required": true,
                    "description": "The name of the user"
                },
                "email": {
                    "type": "string",
                    "description": "Tbe email of the user",
                    "required": true
                },
                "password": {
                    "type": "string",
                    "description": "The password to be used while logging in"
                }
            }
        },
        "login": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string",
                    "description": "Tbe email of the user",
                    "required": true
                },
                "password": {
                    "type": "string",
                    "description": "The password to be used while logging in"
                }
            }
        },
        "otp": {
            "type": "object",
            "properties": {
                "otp": {
                    "Type": "string",
                    "required": true,
                    "description": "The otp which was swent to the user email"
                }
            }
        },
        "forgotPassword": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string",
                    "default": "@gmail.com"
                }
            }
        },
        "resetPassword": {
            "type": "object",
            "properties": {
                "password": {
                    "type": "string",
                    "required": true
                }
            }
        },
        "hospital": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "required": true
                },
                "hospitalCode": {
                    "type": "string",
                    "required": true
                },
                "email": {
                    "type": "string",
                    "required": true,
                    "default": "@gmail.com"
                },
                "phone": {
                    "type": "string",
                    "required": true
                },
                "province": {
                    "type": "string",
                    "required": true
                },
                "district": {
                    "type": "string",
                    "required": true
                },
                "sector": {
                    "type": "string",
                    "required": true
                }
            }
        },
        "delHospital": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "donor":{
            "type":"object",
            "properties":{
                "fullName":{
                    "type": "string",
                    "required":true
                },
                "mobileNumber":{
                    "type": "string",
                    "required":true
                },
                "email":{
                    "type":"string",
                    "required":true,
                    "default":"@gmail.com"
                },
                "nationalID":{
                    "type": "string",
                    "required":true
                },
                "province":{
                    "type": "string",
                    "required":true
                },
                "district":{
                    "type": "string",
                    "required":true
                },
                "sector":{
                    "type": "string",
                    "required":true
                },
                "age":{
                    "type": "string",
                    "required":true
                },
                "gender":{
                    "type": "string",
                    "required":true,
                    "enum": ["male", "female", "other"]
                },
                "bloodGroup":{
                    "type": "string",
                    "required":true,
                    "enum": [
                        "A+",
                        "A-",
                        "O+",
                        "O-",
                        "B+",
                        "B-",
                        "AB+",
                        "AB-"
                    ]
                },
                "donationHospital":{
                    "type":"string"
                }
            }
        },
        "request": {
            "type": "object",
            "properties": {
                "hospital": {
                    "type": "string",
                    "description": "The hospital id which is requesting the emergency blood request",
                    "required": true
                },
                "emergencyBloodType": {
                    "type": "string",
                    "description": "The blood type that is being requested by the hospital",
                    "required": true,
                    "enum": [
                        "A+",
                        "A-",
                        "O+",
                        "O-",
                        "B+",
                        "B-",
                        "AB+",
                        "AB-"
                    ],
                    "default": "O+"
                },
                "quantity": {
                    "type":"integer",
                    "required":true
                },
                "status":{
                    "type":"string",
                    "required":true,
                    "enum":[
                        "Sent",
                        "Pending",
                        "Matched",
                        "Fulfilled"
                    ],
                    "default":"Sent"
                }
            }
        }
    }
}